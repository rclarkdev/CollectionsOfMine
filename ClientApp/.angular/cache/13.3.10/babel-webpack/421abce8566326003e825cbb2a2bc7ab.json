{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\rclar\\\\source\\\\repos\\\\CollectionsOfMine\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from \"@angular/core\";\nimport { CommonService } from \"../../services/common.service\";\nimport { DataTableDirective } from \"angular-datatables\";\nimport { Subject } from \"rxjs\";\nlet AreaListComponent = class AreaListComponent {\n  constructor(router, http, activeRoute, dataTableService, modalService) {\n    var _this = this;\n    this.router = router;\n    this.http = http;\n    this.activeRoute = activeRoute;\n    this.dataTableService = dataTableService;\n    this.modalService = modalService;\n    this.viewAreas = [];\n    this.showTable = true;\n    this.dtOptions = {};\n    this.dtTrigger = new Subject();\n    this.allAreas = /*#__PURE__*/_asyncToGenerator(function* () {\n      const that = _this;\n      _this.getAreas().then(function (areas) {\n        that.areasService.setTypes(areas);\n        that.areasService.typesObservable.subscribe(areas => {\n          that.areas = areas;\n          that.dataTableService.setDtTrigger(areas);\n          that.viewAreas.length = 0;\n          that.areas.forEach(function (area) {\n            let viewArea = {\n              Id: area[\"id\"],\n              Name: area[\"name\"],\n              Description: area[\"description\"],\n              CreatedOn: area[\"createdOn\"].split(\"T\")[0]\n            };\n            that.viewAreas.push(viewArea);\n          });\n        });\n      });\n    });\n    this.getAreas = /*#__PURE__*/_asyncToGenerator(function* () {\n      return yield _this.areasService.getAll();\n    });\n    this.refreshAreas = () => {\n      this.allAreas();\n    };\n    this.edit = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(function* (content, id) {\n        _this.areaId = id;\n        _this.open(content);\n      });\n      return function (_x, _x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    this.delete = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(function* (id) {\n        if (confirm(\"Are you sure?\")) {\n          yield _this.areasService.delete(id);\n          _this.refreshAreas();\n          _this.rerender();\n        }\n      });\n      return function (_x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    this.areasService = new CommonService(\"areas\", http);\n  }\n  open(content, createArea = false) {\n    this.createArea = createArea;\n    this.modalService.open(content).result.then(result => {}, reason => {});\n  }\n  ngOnInit() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.activeRoute.paramMap.subscribe(params => {\n        _this2.area = params.get(\"area\");\n      });\n      _this2.allAreas();\n    })();\n  }\n  rerender() {\n    this.dtElement.dtInstance.then(dtInstance => {\n      dtInstance.destroy();\n      this.dtTrigger.next();\n    });\n  }\n};\n__decorate([ViewChild(DataTableDirective, {\n  static: false\n})], AreaListComponent.prototype, \"dtElement\", void 0);\nAreaListComponent = __decorate([Component({\n  selector: \"app-area-list\",\n  templateUrl: \"./area-list.component.html\",\n  styleUrls: [\"./area-list.component.css\"]\n})], AreaListComponent);\nexport { AreaListComponent };","map":{"version":3,"names":["__decorate","Component","ViewChild","CommonService","DataTableDirective","Subject","AreaListComponent","constructor","router","http","activeRoute","dataTableService","modalService","viewAreas","showTable","dtOptions","dtTrigger","allAreas","that","getAreas","then","areas","areasService","setTypes","typesObservable","subscribe","setDtTrigger","length","forEach","area","viewArea","Id","Name","Description","CreatedOn","split","push","getAll","refreshAreas","edit","content","id","areaId","open","delete","confirm","rerender","createArea","result","reason","ngOnInit","paramMap","params","get","dtElement","dtInstance","destroy","next","static","prototype","selector","templateUrl","styleUrls"],"sources":["C:/Users/rclar/source/repos/CollectionsOfMine/ClientApp/src/app/area/list/area-list.component.ts"],"sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component, ViewChild } from \"@angular/core\";\r\nimport { CommonService } from \"../../services/common.service\";\r\nimport { DataTableDirective } from \"angular-datatables\";\r\nimport { Subject } from \"rxjs\";\r\nlet AreaListComponent = class AreaListComponent {\r\n    constructor(router, http, activeRoute, dataTableService, modalService) {\r\n        this.router = router;\r\n        this.http = http;\r\n        this.activeRoute = activeRoute;\r\n        this.dataTableService = dataTableService;\r\n        this.modalService = modalService;\r\n        this.viewAreas = [];\r\n        this.showTable = true;\r\n        this.dtOptions = {};\r\n        this.dtTrigger = new Subject();\r\n        this.allAreas = async () => {\r\n            const that = this;\r\n            this.getAreas().then(function (areas) {\r\n                that.areasService.setTypes(areas);\r\n                that.areasService.typesObservable.subscribe((areas) => {\r\n                    that.areas = areas;\r\n                    that.dataTableService.setDtTrigger(areas);\r\n                    that.viewAreas.length = 0;\r\n                    that.areas.forEach(function (area) {\r\n                        let viewArea = {\r\n                            Id: area[\"id\"],\r\n                            Name: area[\"name\"],\r\n                            Description: area[\"description\"],\r\n                            CreatedOn: area[\"createdOn\"].split(\"T\")[0],\r\n                        };\r\n                        that.viewAreas.push(viewArea);\r\n                    });\r\n                });\r\n            });\r\n        };\r\n        this.getAreas = async () => {\r\n            return await this.areasService.getAll();\r\n        };\r\n        this.refreshAreas = () => {\r\n            this.allAreas();\r\n        };\r\n        this.edit = async (content, id) => {\r\n            this.areaId = id;\r\n            this.open(content);\r\n        };\r\n        this.delete = async (id) => {\r\n            if (confirm(\"Are you sure?\")) {\r\n                await this.areasService.delete(id);\r\n                this.refreshAreas();\r\n                this.rerender();\r\n            }\r\n        };\r\n        this.areasService = new CommonService(\"areas\", http);\r\n    }\r\n    open(content, createArea = false) {\r\n        this.createArea = createArea;\r\n        this.modalService.open(content).result.then((result) => { }, (reason) => { });\r\n    }\r\n    async ngOnInit() {\r\n        await this.activeRoute.paramMap.subscribe((params) => {\r\n            this.area = params.get(\"area\");\r\n        });\r\n        this.allAreas();\r\n    }\r\n    rerender() {\r\n        this.dtElement.dtInstance.then((dtInstance) => {\r\n            dtInstance.destroy();\r\n            this.dtTrigger.next();\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild(DataTableDirective, { static: false })\r\n], AreaListComponent.prototype, \"dtElement\", void 0);\r\nAreaListComponent = __decorate([\r\n    Component({\r\n        selector: \"app-area-list\",\r\n        templateUrl: \"./area-list.component.html\",\r\n        styleUrls: [\"./area-list.component.css\"],\r\n    })\r\n], AreaListComponent);\r\nexport { AreaListComponent };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}